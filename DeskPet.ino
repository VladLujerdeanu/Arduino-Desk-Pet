#include <LedControl.h>

const char DIN = 12;
const char CS =  11;
const char CLK = 10;

const char LButton = 51;
char LButtonState = 0;
const char MButton = 52;
char MButtonState = 0;
const char RButton = 53;
char RButtonState = 0;

byte happyFace[] = {0x04, 0x02, 0x24, 0x40, 0x40, 0x24, 0x02, 0x04};
byte unhappyFace[] = {0x04, 0x02, 0x04, 0x20, 0x20, 0x04, 0x02, 0x04};
byte sadFace[] = {0x04, 0x02, 0x44, 0x20, 0x20, 0x44, 0x02, 0x04};
byte cryFace[] = {0x04, 0xFC, 0x04, 0x20, 0x20, 0x04, 0xFC, 0x04};

byte foodFull[] = {0x00, 0x70, 0xFC, 0xFE, 0xFF, 0xFD, 0x73, 0x02};
byte foodHalf[] = {0x00, 0x70, 0xEC, 0xE2, 0xE3, 0xED, 0x73, 0x02};
byte foodEmpty[] = {0x00, 0x70, 0x8C, 0x82, 0x83, 0x8D, 0x73, 0x02};

LedControl lc = LedControl(DIN, CLK, CS, 0);

void lifeStatus(byte level) {
  byte lifeLevel[6][8] = {
    {0x1C, 0x22, 0x42, 0x84, 0x84, 0x42, 0x22, 0x1C},
    {0x1C, 0x22, 0x42, 0xC4, 0xC4, 0x42, 0x22, 0x1C},
    {0x1C, 0x22, 0x62, 0xE4, 0xE4, 0x62, 0x22, 0x1C},
    {0x1C, 0x32, 0x72, 0xF4, 0xF4, 0x72, 0x32, 0x1C},
    {0x1C, 0x3A, 0x7A, 0xFC, 0xFC, 0x7A, 0x3A, 0x1C},
    {0x1C, 0x3E, 0x7E, 0xFC, 0xFC, 0x7E, 0x3E, 0x1C}
  };

  displayLED(lifeLevel[level]);
  delay(100);
  lc.clearDisplay(0);
  delay(100);
  displayLED(lifeLevel[level]);
  delay(100);
  lc.clearDisplay(0);
  delay(100);
  displayLED(lifeLevel[level]);
  delay(100);
  lc.clearDisplay(0);
  delay(100);
  displayLED(lifeLevel[level]);
}

void hungerStatus(byte level) {
  byte hungerLevel[6][8] = {
    {0x00, 0x70, 0x8C, 0x82, 0x83, 0x8D, 0x73, 0x02},
    {0x00, 0x70, 0xCC, 0xC2, 0xC3, 0xCD, 0x73, 0x02},
    {0x00, 0x70, 0xEC, 0xE2, 0xE3, 0xED, 0x73, 0x02},
    {0x00, 0x70, 0xFC, 0xF2, 0xF3, 0xFD, 0x73, 0x02},
    {0x00, 0x70, 0xFC, 0xFA, 0xFB, 0xFD, 0x73, 0x02},
    {0x00, 0x70, 0xFC, 0xFE, 0xFF, 0xFD, 0x73, 0x02}
  };

  displayLED(hungerLevel[level]);
  delay(100);
  lc.clearDisplay(0);
  delay(100);
  displayLED(hungerLevel[level]);
  delay(100);
  lc.clearDisplay(0);
  delay(100);
  displayLED(hungerLevel[level]);
  delay(100);
  lc.clearDisplay(0);
  delay(100);
  displayLED(hungerLevel[level]);

}

void displayLED(byte character [])
{
  int i = 0;
  for (i = 0; i < 8; i++)
  {
    lc.setRow(0, i, character[i]);
  }
}

void setup() {
  lc.shutdown(0, false);      //The MAX72XX is in power-saving mode on startup
  lc.setIntensity(0, 3);     // Set the brightness to maximum value
  lc.clearDisplay(0);         // and clear the display
}

void loop() {

  LButtonState = digitalRead(LButton);
  MButtonState = digitalRead(MButton);
  RButtonState = digitalRead(RButton);

  if(LButtonState){
    hungerStatus(2);
  }
  if(RButtonState){
    lifeStatus(2);
  }
  if(MButtonState){
    displayLED(happyFace);
  }
}
